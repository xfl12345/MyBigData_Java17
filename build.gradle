plugins {
    id "org.springframework.boot" version "2.6.6"
    id "io.spring.dependency-management" version "1.0.11.RELEASE"
    id "java"
    id "war"
}

group = "cc.xfl12345"
version = "0.0.1"
sourceCompatibility = "17"
apply from: "config.gradle"

gradle.projectsEvaluated {
    tasks.withType(JavaCompile) {
        options.compilerArgs << "-Xlint:unchecked"
        options.encoding = "UTF-8"
    }
}

repositories {
    mavenLocal()
    mavenCentral()
    gradlePluginPortal()
    maven {
        url "https://jitpack.io"
    }
    maven {
        url "https://maven.aliyun.com/repository/public/"
    }
    maven {
        url "https://maven.aliyun.com/repository/spring/"
    }
    maven {
        url "https://maven.aliyun.com/repository/spring-plugin"
    }
}

dependencies {

    def springBootVersion = "2.6.7"
    def mybatisGeneratorVersion = "1.4.1"
    def lombokVersion = '1.18.24'
    def victools_jsonschema = "4.24.2"
    def saTokenVersion = '1.29.1.trial'
    def asmVersion = "9.3"

    def springBootDependencies = [
        "starter-log4j2",
        //"starter-thymeleaf",
        "starter-web",
        "starter-aop",
        "starter-data-jdbc",
        "devtools",
        "configuration-processor"
    ]

    springBootDependencies.each {
        moduleName -> implementation(group: "org.springframework.boot", name: "spring-boot-" + moduleName, version: springBootVersion) {
            exclude group: "org.springframework.boot", module: "spring-boot-starter-logging"
        }
    }

    testImplementation("org.springframework.boot:spring-boot-starter-test:$springBootVersion") {
        exclude group: "org.springframework.boot", module: "spring-boot-starter-logging"
        exclude group: "com.vaadin.external.google", module: "android-json"
    }
    providedRuntime "org.springframework.boot:spring-boot-starter-tomcat:$springBootVersion"
    annotationProcessor group: "org.springframework.boot", name: "spring-boot-configuration-processor", version: springBootVersion

    // 阿里巴巴 Druid Datasource
    // https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter
    implementation(group: "com.alibaba", name: "druid-spring-boot-starter", version: "1.2.9") {
        exclude group: "org.springframework.boot", module: "spring-boot-autoconfigure"
    }

    // 国产ORM框架 bee
    // https://mvnrepository.com/artifact/org.teasoft/bee-spring-boot-starter
    implementation group: "org.teasoft", name: "bee-spring-boot-starter", version: '1.9.8.boot2.5.6'
    implementation group: "org.teasoft", name: "bee-spring-boot-starter", version: '1.9.8.boot2.5.6', ext: "pom"

    // Sa-Token 框架
    // https://mvnrepository.com/artifact/cn.dev33/sa-token-spring-boot-starter
    implementation(group: "cn.dev33", name: "sa-token-spring-boot-starter", version: saTokenVersion) {
        exclude group: "org.springframework.boot", module: "spring-boot-starter-logging"
    }
    implementation(group: "cn.dev33", name: "sa-token-oauth2", version: saTokenVersion)

    // SpringDoc 框架
    // https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-ui
    implementation group: "org.springdoc", name: "springdoc-openapi-ui", version: "1.6.8"


    project.ext.myDiyConf.dependencies.each {
        groupId, groupEntry ->
            {
                groupEntry.each {
                    version, versionEntry ->
                        {
                            versionEntry.each {
                                moduleName -> implementation(group: groupId, name: moduleName, version: version)
                            }
                        }
                }
            }
    }

//    def javaMailVersion = "1.6.2"

    // 字符串风格转换工具
    // https://mvnrepository.com/artifact/com.shekhargulati/strman
    implementation group: "com.shekhargulati", name: "strman", version: "0.4.0"

    // 注解神器 getter setter toString builder
    // https://mvnrepository.com/artifact/org.projectlombok/lombok
    implementation group: "org.projectlombok", name: "lombok", version: lombokVersion
    annotationProcessor group: "org.projectlombok", name: "lombok", version: lombokVersion
    testAnnotationProcessor group: "org.projectlombok", name: "lombok", version: lombokVersion
    testImplementation group: "org.projectlombok", name: "lombok", version: lombokVersion

    // JSON support
    // https://mvnrepository.com/artifact/com.alibaba/fastjson
    implementation group: "com.alibaba", name: "fastjson", version: '2.0.1'

    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    implementation group: "com.google.code.gson", name: "gson", version: "2.9.0"

    // https://mvnrepository.com/artifact/org.json/json
    implementation group: "org.json", name: "json", version: "20220320"

    // JSON Schema support
    // https://mvnrepository.com/artifact/com.github.victools/jsonschema-generator
    implementation group: "com.github.victools", name: "jsonschema-generator", version: victools_jsonschema

    // https://jitpack.io/#net.jimblackler/jsonschemafriend
    implementation "net.jimblackler.jsonschemafriend:core:0.11.3"

    // Ant support
    // https://mvnrepository.com/artifact/org.apache.ant/ant
    implementation group: "org.apache.ant", name: "ant", version: "1.10.12"

    // apache commons
    // https://mvnrepository.com/artifact/org.apache.commons/commons-lang3
    implementation group: "org.apache.commons", name: "commons-lang3", version: "3.12.0"

    // https://mvnrepository.com/artifact/org.apache.commons/commons-configuration2
    implementation group: "org.apache.commons", name: "commons-configuration2", version: "2.7"

    // https://mvnrepository.com/artifact/org.apache.commons/commons-collections4
    implementation group: "org.apache.commons", name: "commons-collections4", version: "4.4"

    // https://mvnrepository.com/artifact/org.apache.commons/commons-crypto
    implementation group: "org.apache.commons", name: "commons-crypto", version: "1.1.0"

    // https://mvnrepository.com/artifact/org.apache.xmlbeans/xmlbeans
    implementation group: "org.apache.xmlbeans", name: "xmlbeans", version: "5.0.3"

    // https://mvnrepository.com/artifact/org.apache.commons/commons-vfs2
    implementation group: "org.apache.commons", name: "commons-vfs2", version: "2.9.0"

    // https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore
    implementation group: "org.apache.httpcomponents", name: "httpcore", version: "4.4.15"

    // https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient
    implementation group: "org.apache.httpcomponents", name: "httpclient", version: "4.5.13"

    // https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload
    implementation group: "commons-fileupload", name: "commons-fileupload", version: "1.4"

    // https://mvnrepository.com/artifact/commons-httpclient/commons-httpclient
    implementation group: 'commons-httpclient', name: 'commons-httpclient', version: '3.1'

    // XML support
    // https://mvnrepository.com/artifact/org.jsoup/jsoup
    implementation group: "org.jsoup", name: "jsoup", version: "1.14.3"

//    // https://mvnrepository.com/artifact/org.dom4j/dom4j
//    implementation group: "org.dom4j", name: "dom4j", version: "2.1.3"

//    // https://mvnrepository.com/artifact/com.j2html/j2html
//    implementation group: "com.j2html", name: "j2html", version: "1.4.0"

    // UUID generator support
    // https://mvnrepository.com/artifact/com.fasterxml.uuid/java-uuid-generator
    implementation group: "com.fasterxml.uuid", name: "java-uuid-generator", version: "4.0.1"

    // JDBC Driver
//    // https://mvnrepository.com/artifact/mysql/mysql-connector-java
//    implementation group: "mysql", name: "mysql-connector-java", version: "5.1.49"
    // https://mvnrepository.com/artifact/mysql/mysql-connector-java
    implementation group: "mysql", name: "mysql-connector-java", version: "8.0.28"

//    // https://mvnrepository.com/artifact/com.alibaba/druid
//    implementation group: "com.alibaba", name: "druid", version: "1.2.8"

    // MyBatis
    // https://mvnrepository.com/artifact/org.mybatis/mybatis
    implementation group: "org.mybatis", name: "mybatis", version: "3.5.9"

    // https://mvnrepository.com/artifact/org.mybatis/mybatis-spring
    implementation group: "org.mybatis", name: "mybatis-spring", version: "2.0.7"

    // https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core
    implementation group: "org.mybatis.generator", name: "mybatis-generator-core", version: mybatisGeneratorVersion

//    // https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-maven-plugin
//    implementation group: "org.mybatis.generator", name: "mybatis-generator-maven-plugin", version: mybatisGeneratorVersion
//
//    // https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator
//    implementation group: "org.mybatis.generator", name: "mybatis-generator", version: mybatisGeneratorVersion, ext: "pom"

    // tk.mybatis Dependence
    // https://mvnrepository.com/artifact/org.freemarker/freemarker
    implementation group: "org.freemarker", name: "freemarker", version: "2.3.31"

    // https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-maven-plugin
//    implementation group: "org.mybatis.generator", name: "mybatis-generator-maven-plugin", version: "1.4.0"

//    // Java Email support
//    // https://mvnrepository.com/artifact/com.sun.mail/javax.mail
//    implementation group: "com.sun.mail", name: "javax.mail", version: javaMailVersion
//
//    // https://mvnrepository.com/artifact/javax.mail/javax.mail-api
//    implementation group: "javax.mail", name: "javax.mail-api", version: javaMailVersion

//    // 大名鼎鼎的 Java字节码操作框架 ASM
//    // https://mvnrepository.com/artifact/org.ow2.asm/asm
//    implementation group: "org.ow2.asm", name: "asm", version: asmVersion
//
//    // https://mvnrepository.com/artifact/org.ow2.asm/asm-commons
//    implementation group: "org.ow2.asm", name: "asm-commons", version: asmVersion
//
//    // https://mvnrepository.com/artifact/org.ow2.asm/asm-util
//    implementation group: "org.ow2.asm", name: "asm-util", version: asmVersion
//
//    // 大名鼎鼎的 Java字节码工具 javassist
//    // https://mvnrepository.com/artifact/org.javassist/javassist
//    implementation group: "org.javassist", name: "javassist", version: "3.28.0-GA"


    // https://mvnrepository.com/artifact/org.jsonschema2pojo/jsonschema2pojo
    implementation group: "org.jsonschema2pojo", name: "jsonschema2pojo-core", version: "1.1.1"

    // https://mvnrepository.com/artifact/com.google.jimfs/jimfs
    implementation group: "com.google.jimfs", name: "jimfs", version: "1.2"



//    implementation fileTree(dir:"src/main/webapp",includes:["**/*.*"])

}

tasks.named("test") {
    useJUnitPlatform()
}
